(function(e){function t(t){for(var a,i,c=t[0],s=t[1],d=t[2],u=0,g=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&g.push(o[i][0]),o[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);l&&l(t);while(g.length)g.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/vcytoscape/demo/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1af4":function(e,t,n){var a=n("abd8");t=a(!1),t.push([e.i,".cytoscape--container[data-v-abf78cdc]{text-align:left;position:relative;width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;background:#fff}.cytoscape--container .cytoscape--container__graph[data-v-abf78cdc],.cytoscape--container .cytoscape--container__loading[data-v-abf78cdc]{position:absolute;top:0;left:0;right:0;bottom:0}.cytoscape--container .cytoscape--container__graph .text[data-v-abf78cdc],.cytoscape--container .cytoscape--container__loading .text[data-v-abf78cdc]{padding:10px}",""]),e.exports=t},2294:function(e,t,n){"use strict";var a=n("8a47"),o=n.n(a);o.a},"24dd":function(e,t,n){"use strict";var a=n("9e64"),o=n.n(a);o.a},"31af":function(e,t,n){e.exports=n.p+"img/person.9cb95bf6.svg"},"347b":function(e,t,n){var a=n("abd8");t=a(!1),t.push([e.i,".cytoscape[data-v-777b33e8]{z-index:1}.cytoscape[data-v-777b33e8],.cytoscape--container__loading[data-v-777b33e8],.legend[data-v-777b33e8]{position:absolute;left:0;top:0;bottom:0;right:0}.cytoscape--container__loading[data-v-777b33e8]{z-index:2000;background:#fff}.cytoscape--container__loading .progress-bar[data-v-777b33e8]{top:50%;margin-top:-15px;left:20%;width:60%;text-align:center;position:absolute;overflow:hidden}.cytoscape--container__loading .progress-bar .progress-bar__outer[data-v-777b33e8]{width:100%;border-radius:100px;margin:16px 0;height:10px;background-color:#ebeef5;overflow:hidden;position:relative;vertical-align:middle}.cytoscape--container__loading .progress-bar .progress-bar__outer .progress-bar__inner[data-v-777b33e8]{position:absolute;left:0;top:0;height:100%;background-color:#409eff;text-align:right;border-radius:100px;line-height:1;white-space:nowrap}.cytoscape--container__loading .center[data-v-777b33e8]{top:50%;margin-top:-21px;width:100%;text-align:center;position:absolute}.cytoscape--container__loading .center .circular[data-v-777b33e8]{height:42px;width:42px;-webkit-animation:loading-rotate 2s linear infinite;animation:loading-rotate 2s linear infinite}.cytoscape--container__loading .center .circular .path[data-v-777b33e8]{-webkit-animation:loading-dash 1.5s ease-in-out infinite;animation:loading-dash 1.5s ease-in-out infinite;stroke-dasharray:90,150;stroke-dashoffset:0;stroke-width:2;stroke:#409eff;stroke-linecap:round}",""]),e.exports=t},"4b09":function(e,t,n){e.exports=n.p+"img/clothes.2b623ebd.svg"},"56d7":function(e,t,n){"use strict";n.r(t);n("d9a3"),n("c9db"),n("de3e"),n("618d");var a=n("0261"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cytoscape",attrs:{id:"app"}},[n("vcytoscape",{ref:"cytoscape",staticClass:"cytoscape",attrs:{option:e.option.cytoscape,category:e.option.category,data:e.graphData},on:{mouseover:e.createTippy,ready:e.cytoscapeInit},scopedSlots:e._u([{key:"legend",fn:function(t){return[n("vcytoscape-legend",{attrs:{data:t.data,option:e.option.nodeLegend,category:t.category},model:{value:e.legendNodeModel,callback:function(t){e.legendNodeModel=t},expression:"legendNodeModel"}}),n("vcytoscape-legend",{attrs:{data:t.data,type:"edges",option:e.option.edgeLegend,category:t.category},model:{value:e.legendEdgeModel,callback:function(t){e.legendEdgeModel=t},expression:"legendEdgeModel"}})]}}])}),!e.option.cytoscape.layout.animate&&e.layoutProgress<1?n("div",{staticClass:"cytoscape--container__loading"},[0===e.layoutProgress?n("div",{staticClass:"center"},[n("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),n("div",{staticClass:"text"},[e._v("正在解析图谱，请稍后...")])]):n("div",{staticClass:"progress-bar"},[n("div",{staticClass:"progress-bar__outer"},[n("div",{staticClass:"progress-bar__inner",style:{width:e.progressText}})]),n("div",{staticClass:"text"},[e._v("正在计算布局，请稍后 "+e._s(e.progressText))])])]):e._e()],1)},r=[],i=(n("7ae7"),n("86dd"),n("af82"),n("a677"),n("4423"),n("3c4a"),n("79dd"),n("3a20"),n("b3f9"),n("7267"),n("3547"),n("d780"),n("9a14"),n("1a8c"),n("c354"),n("f4a0"),["hospital","clothes","computer","person","flower","tree","desk","house","water","cup"]),c=["has","goto","love"],s=["2017","2018","2019"];function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return(e||"")+Number(Math.random().toString().substr(3,t)+Date.now()).toString(36)}function l(e){for(var t=[],n=0;n<e;n++){var a=i[Math.floor(Math.random()*i.length)],o={id:d("node_"),group:a,parent:a};o.label=o.group+"-node"+n,t.push({group:"nodes",data:o,id:o.id})}return t}function u(e,t){for(var n=[],a=0;a<t-1;a++){var o=e[a+1].data.id,r=e[Math.floor(Math.sqrt(a))].data.id,i={target:o,source:r,id:d("edge_"),group:c[Math.floor(Math.random()*c.length)],time:s[Math.floor(Math.random()*s.length)]+"-"+Math.ceil(12*Math.random())+"-"+Math.ceil(30*Math.random())};i.label="edge"+a,i.name="edge"+a,n.push({data:i,group:"edges",id:i.id})}return n}function g(e,t){var n=e.map((function(e){return{group:"edges",data:{target:e.data.id,source:t,id:d("edge_"),group:c[Math.floor(Math.random()*c.length)],label:e.data.id+"-"+t,name:e.data.id+"-"+t}}}));return n}function f(e){var t=l(e),n=u(t,e);return t.concat(n)}function p(e,t){var n=l(t),a=g(n,e);return n.concat(a)}f(20);var h=n("ea42"),y=n.n(h),v=n("31af"),b=n.n(v),m=n("bf3e"),k=n.n(m),x=n("4b09"),_=n.n(x),C=n("5803"),I=(n("40a3"),n("8505"),n("96d8"),{name:"cytoscapePage",data:function(){var e=this;return{layoutProgress:0,tooltip:{},option:{nodeLegend:{show:!0,formatter:function(e){var t={hospital:"医院",clothes:"衣服",computer:"电脑",person:"个人"};return Object.keys(t).forEach((function(n){e=e.replace(n,t[n])})),e},orient:"vertical",style:{padding:"10px",top:0,left:0},tagStyle:{borderWidth:"1px",borderStyle:"solid"},inactiveTagStyle:{borderColor:"#ccc"}},edgeLegend:{show:!0,style:{padding:"10px",top:0,right:0},tagStyle:{borderRadius:0,borderWidth:0,borderTopWidth:"2px",height:"0px","line-height":"10px"},inactiveTagStyle:{borderColor:"#ccc",backgroundColor:"none"},formatter:function(e){var t={has:"拥有",love:"喜欢",goto:"去过"};return Object.keys(t).forEach((function(n){e=e.replace(n,t[n])})),e}},cytoscape:{style:[{selector:"node",style:{shape:"round-rectangle"}},{selector:"node:parent",style:{"background-opacity":0,"border-width":0}},{selector:"edge",style:{width:1,"curve-style":"bezier","target-arrow-shape":"vee"}},{selector:"node[label]",style:{label:"data(label)","font-size":"9px",color:"#666","z-index":2}},{selector:"edge[label]",style:{"font-size":"9px",color:"#626867","z-index":1}}],layout:{name:"d3-force",animate:!0,linkId:function(e){return e.id},linkDistance:100,manyBodyStrength:-300,xX:500,yY:500,ready:function(){},stop:function(t){e.layoutProgress=1},tick:function(t){e.layoutProgress=t},randomize:!1,infinite:!0}},contextMenus:{menuItems:[{id:"nextlevel",content:"查询下一级",selector:"node",onClickFunction:function(t){e.addNode(t)},disabled:!1,show:!0,hasTrailingDivider:!1}]},tooltip:{trigger:"mouseenter",content:function(e){var t=e.target;if(t&&t!==e.cy)return t.isEdge()?'<div style="text-align: left"><div>名称： '.concat(t.data("name"),"</div><div>时间： ").concat(t.data("time"),"</div></div>"):t.isNode()?'<div style="text-align: left"><div>id： '.concat(t.data("id"),"</div><div>position： ").concat(t.position("x"),", ").concat(t.position("y"),"</div><div>renderedPosition： ").concat(t.renderedPosition("x"),", ").concat(t.renderedPosition("y"),"</div><div>虚拟位置： ").concat(t.data("x"),", ").concat(t.data("y"),"</div></div>"):void 0},animation:"fade",theme:"light-border"},category:{nodes:{key:"group",styles:{hospital:{"background-image":y.a,"background-width":"80%","background-height":"80%","background-repeat":"no-repeat"},clothes:{"background-image":_.a,"background-width":"80%","background-height":"80%","background-repeat":"no-repeat"},computer:{"background-image":k.a,"background-width":"80%","background-height":"80%","background-repeat":"no-repeat"},person:{"background-image":b.a,"background-width":"80%","background-height":"80%","background-repeat":"no-repeat"}}},edges:[{name:"love",matching:function(e){return"love"===e.group},style:{"source-arrow-shape":"vee","line-style":"dashed","line-color":"#61a0a8",width:1}},{name:"goto",matching:function(e){return"goto"===e.group},style:{"line-style":"dashed","line-color":"#2f4554",width:1}},{name:"has",matching:function(e){return"has"===e.group},style:{"line-style":"dashed","line-color":"#c23531",width:1}}]}},graphData:[],legendNodeFilterId:"",legendEdgeFilterId:"",legendNodeModel:{},legendEdgeModel:{}}},computed:{progressText:function(){return(100*this.layoutProgress).toFixed(1)+"%"}},watch:{legendNodeModel:{handler:function(e){this.legendChange(e,"nodes")},deep:!0},legendEdgeModel:{handler:function(e){this.legendChange(e,"edges")},deep:!0}},methods:{legendChange:function(e,t){var n=this.$refs.cytoscape,a=Object.keys(e).filter((function(t){return!e[t]}));"nodes"===t?a.length?this.legendNodeFilterId=n.filterByFunction((function(e){return e.filter((function(e){return e.isEdge()||e.isNode()&&!a.includes(e.data("group"))}))}),this.legendNodeFilterId,!0):this.legendNodeFilterId&&n.resetFilter(this.legendNodeFilterId,!0):a.length?this.legendEdgeFilterId=n.filterByFunction((function(e){var t=e.filter((function(e){return e.isEdge()&&!a.includes(e.data("group"))}));return e.filter((function(e){return t.contains(e)||t.some((function(t){return t.source()===e||t.target()===e}))}))}),this.legendEdgeFilterId,!0):this.legendEdgeFilterId&&n.resetFilter(this.legendEdgeFilterId,!0)},cytoscapeInit:function(e){e.cy.contextMenus(this.option.contextMenus)},addNode:function(e){e.target.lock();var t=e.target.id(),n=p(t,2);this.graphData=this.graphData.concat(n),e.cy.delay(1e3,(function(){e.target.unlock()}))},createTippy:function(e){var t=this;if(this.option.tooltip){var n=e.target;if(n!==e.cy){var a="[object Function]"===Object.prototype.toString.call(this.option.tooltip.content)?this.option.tooltip.content(e):this.option.tooltip.content,o={content:a};Object.keys(this.option.tooltip).forEach((function(e){"content"!==e&&"selector"!==e&&(o[e]=t.option.tooltip[e])})),this.tooltip[n.id()]?this.tooltip[n.id()].setContent(a):this.tooltip[n.id()]=Object(C["a"])(n.popperRef(),o),setTimeout((function(){C["a"].hideAll(),t.tooltip[n.id()].show()}),10)}}}},mounted:function(){var e=this;setTimeout((function(){e.graphData=f(80)}),100)}}),O=I,w=(n("24dd"),n("623f")),$=Object(w["a"])(O,o,r,!1,null,"777b33e8",null),j=$.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cytoscape--container"},[n("div",{ref:"cytoscapeBox",staticClass:"cytoscape--container__graph"}),e._t("legend",null,{data:e.data,category:e.category})],2)},S=[],E=(n("09ee"),n("5d5d"),n("ce6b"),n("baa4"),n("ef8e"),n("3e5e"),n("252a"),n("419a"),n("e980")),N=n("0d94"),D=n("d15f"),T=n.n(D),B={_cxttap:function(e){var t=e.target;this.elements().unselect(),t!==this&&this.elements(t).select()},_select:function(e){var t=e.target;if(t!==this){var n=this.elements(":selected"),a=this.collection();a=t.isNode()?n.closedNeighborhood():a.merge(n).merge(n.connectedNodes());var o=this.elements().difference(a);o.removeClass("hover").addClass("unhover"),a.removeClass("unhover").addClass("hover")}},_unselect:function(){this.elements().removeClass("unhover").removeClass("hover")}};function F(e){var t="",n=[];return["select","unselect","cxttap"].forEach((function(a){t?e.on(a,t,B["_".concat(a)]):e.on(a,B["_".concat(a)]),n.push((function(){t?e.off(a,t,B["_".concat(a)]):e.off(a,B["_".concat(a)])}))})),n}var P=F,z=(n("e90c"),n("c1f4"),n("c1b0"),n("54d0")),A=function(e){return"[object Object]"===Object.prototype.toString.call(e)},R=function(e){return"[object Array]"===Object.prototype.toString.call(e)},L=function(e){return"[object Function]"===Object.prototype.toString.call(e)},J=function(e){return void 0===e},W=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"merge",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(A(n)&&A(a))for(var o in a)A(a[o])?(n[o]=A(n[o])?n[o]:{},n[o]=e(t,n[o],a[o])):R(a[o])?(n[o]=R(n[o])?n[o]:[],n[o]=e(t,n[o],a[o])):J(a[o])||(n[o]=a[o]);else R(n)&&R(a)&&("merge"===t?a.forEach((function(o,r){A(o)?(n[r]=A(n[r])?n[r]:{},n[r]=e(t,n[r],o)):R(o)?(n[r]=R(n[r])?n[r]:[],n[r]=e(t,n[r],o)):J(o)||(n[r]=a[r])})):"concat"===t?n=n.concat(a):"findSelector"===t?a.forEach((function(a){var o=n.find((function(e){return e.selector===a.selector}));o?o=e(t,o,a):n.push(a)})):n=a);return n},K=function e(){var t=Array.from(arguments);if(!(t.length<2))return t[1]=W.apply(void 0,Object(z["a"])(t)),t.splice(2,1),t.length>2?e.apply(void 0,Object(z["a"])(t)):2===t.length?t[1]:null},G=function(){var e=Array.from(arguments);return K.apply(void 0,["merge"].concat(Object(z["a"])(e)))},q=function(){var e=Array.from(arguments);return K.apply(void 0,["concat"].concat(Object(z["a"])(e)))},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return(e||"")+Number(Math.random().toString().substr(3,t)+Date.now()).toString(36)},Y=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=(e||"").toLowerCase();if(n&&Y.test(n)){if(4===n.length){for(var a="#",o=1;o<4;o+=1)a+=n.slice(o,o+1).concat(n.slice(o,o+1));n=a}for(var r=[],i=1;i<7;i+=2)r.push(parseInt("0x"+n.slice(i,i+2)));return r.push(t),"rgba("+r.join(",")+")"}if(/^(rgb|RGB)/.test(e)){var c=e.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(","),s=Object(N["a"])(c,3),d=s[0],l=s[1],u=s[2];return"rgba(".concat(d,", ").concat(l,", ").concat(u,", ").concat(t,")")}return e}var Q={"z-index":2},U={"z-index":1},V=["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],Z={nodes:{key:"category",styles:V.map((function(e){return G({},Q,{"background-color":e,"border-color":e})}))},edges:{key:"category",styles:[JSON.parse(JSON.stringify(U))]}},ee={style:[{selector:":active",style:{"overlay-opacity":0}},{selector:"node",style:JSON.parse(JSON.stringify(Q))},{selector:"edge",style:JSON.parse(JSON.stringify(U))},{selector:".hover",style:{"background-opacity":1,"background-image-opacity":1,"z-index":99}},{selector:"edge.hover",style:{width:2,"z-index":98}},{selector:".unhover",style:{opacity:.3}},{selector:"edge.unhover",style:{width:1,opacity:.3}}]},te={name:"vcytoscape",props:{option:{type:Object,default:function(){return{}}},category:{type:Object,default:function(){return{}}},data:{type:[Array,Object],default:function(){return[]}}},data:function(){return{$cytoscapeInstance:null,events:[],cacheRandomIdMap:{},filters:{},$layout:null,$removeData:null}},computed:{unifyData:function(){return R(this.data)?this.filterEdgeWithoutNode({nodes:this.data.filter((function(e){return"nodes"===e.group})),edges:this.data.filter((function(e){return"edges"===e.group}))}):this.filterEdgeWithoutNode(this.data)},nodesCategorys:function(){var e=this,t=Array.from(new Set(this.unifyData.nodes.map((function(t){return e.dataByCategory(t.data,"nodes")})).filter((function(e){return!!e}))));return t},nodesCategoryBy:function(){if(this.category&&this.category.nodes){if(R(this.category.nodes))return this.category.nodes;if(A(this.category.nodes))return this.category.nodes.key}return null},edgesCategorys:function(){var e=this,t=Array.from(new Set(this.unifyData.edges.map((function(t){return e.dataByCategory(t.data,"edges")})).filter((function(e){return!!e}))));return t},edgesCategoryBy:function(){if(this.category&&this.category.edges){if(R(this.category.edges))return this.category.edges;if(A(this.category.edges))return this.category.edges.key}return null},categoryNameToClass:function(){var e=this,t={};return this.nodesCategorys.forEach((function(n){t["nodes_".concat(n)]=e.getCacheRandomId("nodes_".concat(n),"node_class_")})),this.edgesCategorys.forEach((function(n){t["edges_".concat(n)]=e.getCacheRandomId("edges_".concat(n),"edge_class_")})),t},categoryConfig:function(){var e=this,t=[],n={};return this.category&&Object.keys(this.category).forEach((function(a){var o=e.category[a],r=Z[a].styles,i=e["".concat(a,"Categorys")];if(R(o))t=t.concat(o.map((function(t,o){var i=t.name,c=t.style,s=t.status,d=o%r.length;return n[a+"_"+i]=s,{selector:".".concat(e.categoryNameToClass[a+"_"+i]),style:G({},r[d],c)}})));else{var c=o.styles||[],s=o.status||[];if(s){var d=R(s);i.forEach((function(e,t){var o=d?t%s.length:s[e];n[a+"_"+e]=s[o]}))}c&&(R(c)?t=t.concat(i.map((function(t,n){var o=n%c.length,i=n%r.length;return{selector:".".concat(e.categoryNameToClass[a+"_"+t]),style:G({},r[i],c[o])}}))):A(c)&&(t=t.concat(i.map((function(t,n){var o=n%r.length;return{selector:".".concat(e.categoryNameToClass[a+"_"+t]),style:G({},r[o],c[t]||{})}})))))}})),{styles:t,status:n}},cytoscapeOptions:function(){var e=this.layoutName?{layout:{name:this.layoutName}}:{},t=q({},ee,{style:this.categoryConfig.styles},this.option||{},e);return t}},watch:{unifyData:{handler:function(e){this.setData(e)},deep:!0},cytoscapeOptions:{handler:function(e){this.$cytoscapeInstance&&this.setOptions(e)},deep:!0}},methods:{getCacheRandomId:function(e,t,n){return this.cacheRandomIdMap[e]=this.cacheRandomIdMap[e]||X(t,n),this.cacheRandomIdMap[e]},getDataFromKey:function(e,t){if(!t||t.length<1)return e;if(1===t.length)return e[t[0]];var n=t.shift();return this.getDataFromKey(e[n]||{},t)},dataByCategory:function(e,t){if(R(this["".concat(t,"CategoryBy")])){var n=this["".concat(t,"CategoryBy")].find((function(t){return t.matching&&t.matching(e)}));return n?L(n.name)?n.name(e):n.name:void 0}var a=(this["".concat(t,"CategoryBy")]||"").split(".");return this.getDataFromKey(e,a)},getDataWithClasses:function(e){var t=this,n=JSON.parse(JSON.stringify(e||{})),a=n.nodes,o=n.edges;return a.concat(o).map((function(e){var n=t.dataByCategory(e.data,e.group);return e.classes=e.classes||[],G(e,t.categoryConfig.status[e.group+"_"+n]),n&&e.classes.push(t.categoryNameToClass[e.group+"_"+n]),e}))},getAllElements:function(){return this.$cytoscapeInstance&&this.$cytoscapeInstance.elements().merge(this.$removeData||this.$cytoscapeInstance.collection())},setOptions:function(e){var t=this;this.$cytoscapeInstance&&(this.$cytoscapeInstance.startBatch(),Object.keys(e).forEach((function(n){t.$cytoscapeInstance[n]&&t.$cytoscapeInstance[n](e[n])})),this.$cytoscapeInstance.endBatch(),this.reLayout())},filterEdgeWithoutNode:function(e){var t=e.nodes,n=t.map((function(e){var t=e.data;return t.id})),a=e.edges.filter((function(e){var t=e.data;return n.includes(t.source)&&n.includes(t.target)}));return{nodes:t,edges:a}},setData:function(e){var t=this.getDataWithClasses(e);if(!this.$cytoscapeInstance)return this.createCytoscape(t);this.$cytoscapeInstance.startBatch();var n=this.getAllElements(),a=n.filter((function(e){return!t.some((function(t){return e.id()===t.data.id}))}));this.$cytoscapeInstance.remove(a);var o=[];t.forEach((function(e,t){var a=n.$id(e.data.id);if(a&&a.length)for(var r=Object.keys(e),i=r.length,c=0;c<i;c++){var s=r[c];switch(s){case"data":JSON.stringify(a.data())!==JSON.stringify(e.data)&&a.data(e.data);break;case"selected":e.selected?a.select():a.unselect();break;case"selectable":e.selectable?a.selectify():a.unselectify();break;case"locked":e.locked?a.lock():a.unlock();break;case"grabbable":e.grabbable?a.grabify():a.ungrabify();break;case"pannable":e.pannable?a.panify():a.unpanify();break}}else o.push(e)})),this.$cytoscapeInstance.add(o),this.$cytoscapeInstance.endBatch(),this.renderFilter(),this.reLayout()},createCytoscape:function(e){var t=this,n=G({},this.cytoscapeOptions,{container:this.$refs.cytoscapeBox,elements:e||[]});n.layout={name:"null"},this.$cytoscapeInstance=T()(n),this.events=this.events.concat(P(this.$cytoscapeInstance));for(var a=function(){var e=Object(N["a"])(r[o],2),n=e[0],a=e[1],i=function(e){a(e)};t.$cytoscapeInstance.on(n,i),t.events.push((function(){t.$cytoscapeInstance.off(n,i)}))},o=0,r=Object.entries(this.$listeners);o<r.length;o++)a();this.$cytoscapeInstance.ready(),e&&e.length&&this.reLayout()},reLayout:function(){this.$layout&&this.$layout.stop(),this.$layout=this.$cytoscapeInstance.layout(this.cytoscapeOptions.layout),this.$layout.run()},destroy:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$layout&&e.$layout.stop(),!e.$cytoscapeInstance){t.next=7;break}return t.next=4,e.events.forEach((function(e){e()}));case 4:return e.events=[],t.next=7,e.$cytoscapeInstance.destroy();case 7:e.filters={},e.$removeData=null;case 9:case"end":return t.stop()}}),t)})))()},resetFilter:function(e,t){e?delete this.filters[e]:this.filters={},this.renderFilter(t)},filterByFunction:function(e,t,n){var a=t||X("func");return this.filters[a]=e,this.renderFilter(n),a},renderFilter:function(e){var t=this;if(this.$cytoscapeInstance){this.$cytoscapeInstance.startBatch();var n=this.getAllElements(),a=n;Object.keys(this.filters).forEach((function(e){a=t.filters[e](a)}));var o=a.nodes(),r=a.edges().filter((function(e){return o.contains(e.target())&&o.contains(e.source())}));return a=o.merge(r),this.$removeData=n.difference(a),this.$cytoscapeInstance.remove(this.$removeData),this.$cytoscapeInstance.add(a),this.$cytoscapeInstance.endBatch(),e&&this.reLayout(),this.$cytoscapeInstance.emit("update"),a}}},mounted:function(){this.setData(this.unifyData)},beforeDestroy:function(){this.destroy()}},ne=te,ae=(n("2294"),Object(w["a"])(ne,M,S,!1,null,"abf78cdc",null)),oe=ae.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-legend",{attrs:{data:e.legendData,option:e.option},model:{value:e.legendModel,callback:function(t){e.legendModel=t},expression:"legendModel"}})},ie=[],ce=n("3a61"),se={name:"vcytoscapeLegend",components:{vueLegend:ce["vueLegend"]},props:{category:{type:[Object,Array],default:function(){return{}}},option:{type:Object,default:function(){return{}}},data:{type:[Array,Object],default:function(){return[]}},type:{type:String,default:"nodes"},model:{type:Object}},model:{prop:"model",event:"change"},data:function(){return{innerModel:{}}},computed:{categoryInType:function(){return this.category&&this.category[this.type]},legendModel:{get:function(){return G({},this.model||this.innerModel)},set:function(e){this.innerModel=e,this.$emit("change",e)}},legendData:function(){var e=this;return this.categorys.map((function(t){var n=e.categoryParams[t]||{},a=n.style,o=n.formatter,r=a.backgroundColor,i=a.backgroundImage,c=a.backgroundPosition,s=a.backgroundRepeat,d=a.backgroundSize,l=a.borderColor;return Object.assign({},{activeTagStyle:{backgroundColor:r,backgroundImage:i,backgroundPosition:c,backgroundRepeat:s,backgroundSize:d,borderColor:l},tagStyle:{borderStyle:a.borderStyle},activeTextStyle:{color:a.borderColor||a.backgroundColor},formatter:o},{name:t})}))},categoryParams:function(){var e=this,t={};if(this.categoryInType)if(R(this.categoryInType))this.categoryInType.forEach((function(n,a){var o=n.name,r=n.style,i=n.formatter,c=a%Z[e.type].styles.length;t[o]=t[o]||{},t[o].style=G({},Z[e.type].styles[c],r),t[o].formatter=i}));else{var n=this.categoryInType.styles||{};R(n)?this.categorys.forEach((function(a,o){var r=o%n.length,i=o%Z[e.type].styles.length;t[a]=t[a]||{},t[a].style=G({},Z[e.type].styles[i],n[r])})):A(n)&&this.categorys.forEach((function(a,o){var r=o%Z[e.type].styles.length;t[a]=t[a]||{},t[a].style=G({},Z[e.type].styles[r],n[a]||{})}))}return this.getTransStyle(t)},unifyData:function(){return R(this.data)?{nodes:this.data.filter((function(e){return"nodes"===e.group})),edges:this.data.filter((function(e){return"edges"===e.group}))}:this.data},categorys:function(){var e=this,t=Array.from(new Set(this.unifyData[this.type].map((function(t){return e.dataByCategory(t.data)})).filter((function(e){return!!e}))));return t},categoryBy:function(){if(this.categoryInType){if(R(this.categoryInType))return this.categoryInType;if(A(this.categoryInType))return this.categoryInType.key}return null}},methods:{getTransStyle:function(e){var t="nodes"===this.type;return Object.keys(e).forEach((function(n){e[n].style={backgroundColor:e[n].style["background-color"]?H(e[n].style["background-color"],e[n].style["background-opacity"]||1):"none",backgroundImage:e[n].style["background-image"]?"url(".concat(e[n].style["background-image"],")"):"none",backgroundPosition:"center",backgroundRepeat:e[n].style["background-repeat"],backgroundSize:"".concat(e[n].style["background-width"]," ").concat(e[n].style["background-height"]),borderColor:t?e[n].style["border-color"]:e[n].style["line-color"],borderStyle:t?e[n].style["border-style"]||"not specified":e[n].style["line-style"]||"not specified"}})),e},getDataFromKey:function(e,t){if(!t||t.length<1)return e;if(1===t.length)return e[t[0]];var n=t.shift();return this.getDataFromKey(e[n]||{},t)},dataByCategory:function(e){if(R(this.categoryBy)){var t=this.categoryBy.find((function(t){return t.matching&&t.matching(e)}));return t?L(t.name)?t.name(e):t.name:void 0}var n=(this.categoryBy||"").split(".");return this.getDataFromKey(e,n)}}},de=se,le=Object(w["a"])(de,re,ie,!1,null,null,null),ue=le.exports,ge={install:function(e,t){e.component(oe.name,oe),e.component(ue.name,ue),t.beforeCreate&&t.beforeCreate(T.a)}},fe=n("060f"),pe=n.n(fe),he=n("b0a4"),ye=n.n(he),ve=n("debc"),be=n.n(ve),me=(n("f444"),n("e0a0")),ke=n.n(me);a["a"].config.productionTip=!1,a["a"].use(ge,{beforeCreate:function(e){e.use(ye.a,be.a),e.use(ke.a),e.use(pe.a)}}),new a["a"]({render:function(e){return e(j)}}).$mount("#app")},"8a47":function(e,t,n){var a=n("1af4");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("85cb").default;o("792a9040",a,!0,{sourceMap:!1,shadowMode:!1})},"9e64":function(e,t,n){var a=n("347b");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("85cb").default;o("3cd41237",a,!0,{sourceMap:!1,shadowMode:!1})},bf3e:function(e,t,n){e.exports=n.p+"img/computer.5b459181.svg"},ea42:function(e,t,n){e.exports=n.p+"img/hospital.8a4eafbc.svg"}});
//# sourceMappingURL=app.cd99375a.js.map